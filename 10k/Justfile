qb := 'quickbench'
#qb = 'quickbench -N2 -n2'

bench:
    {{ qb }} \
    'ledger -f files1/10k.journal bal' \
    'hledger -f files1/10k.journal bal' \
    'tackler --config tackler.files1.toml' \
    'tackler --config tackler.files28.toml' \
#    'tackler --config tackler.files329.toml' \

#time := 'time'
time := 'gtime'

bench2:
    {{ time }} ledger -f files1/10k.journal bal       >/dev/null; echo
    {{ time }} hledger -f files1/10k.journal bal      >/dev/null; echo
    {{ time }} tackler --config tackler.files1.toml   >/dev/null; echo
    {{ time }} tackler --config tackler.files28.toml  >/dev/null; echo
#    {{ time }} tackler --config tackler.files329.toml >/dev/null; echo

output:
    ledger  -f 10k.journal bal             > balances-ledger.txt
    hledger -f 10k.journal bal             > balances-hledger.txt
    tackler --config tackler.files1.toml   > balances-tackler1.txt
    tackler --config tackler.files28.toml  > balances-tackler28.txt
#    tackler --config tackler.files329.toml > balances-tackler329.txt

files28:
    mkdir -p files28
    for y in `seq 2000 2027`; do echo files28/10k-$y.journal; hledger -f files1/10k.journal print date:$y >files28/10k-$y.journal; done

files336:
    mkdir -p files336
    for y in `seq 2000 2027`; do for m in `seq 1 12`; do echo files336/10k-$y`printf "%02d" $m`.journal; hledger -f files1/10k.journal print date:$y/$m >files336/10k-$y`printf "%02d" $m`.journal; done; done
